<div class="container__month">
  <p>Total de despesas do mÃªs de {{ getFullMonthName() }}: {{ totalDespesas | currency:'BRL' }}</p>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Despesa</th>
        <th>Valor</th>
        <th>Vencimento</th>
        <th>Status</th>
        <th>AÃ§Ãµes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let despesa of despesas; let i = index">
        <td>{{ i + 1 }}</td>

        <!-- Alterna entre visualizaÃ§Ã£o e ediÃ§Ã£o -->
        <ng-container *ngIf="despesaEditando?.id === despesa.id; else viewMode">
          <!-- Modo de EdiÃ§Ã£o -->
          <td *ngIf="despesaEditando">
            <input [(ngModel)]="despesaEditando.nome" required />
          </td>
          <td *ngIf="despesaEditando">
            <input type="number" [(ngModel)]="despesaEditando.valor" required />
          </td>
          <td *ngIf="despesaEditando">
            <input type="date" [(ngModel)]="despesaEditando.vencimento" [ngModelOptions]="{ updateOn: 'blur' }"
              required />
          </td>
          <td>
            <span>Gerado automaticamente</span>
          </td>
          <td>
            <button (click)="salvarEdicao()">ğŸ’¾</button>
            <button (click)="cancelarEdicao()">âŒ</button>
          </td>
        </ng-container>

        <!-- Modo de VisualizaÃ§Ã£o -->
        <ng-template #viewMode>
          <td>{{ despesa.nome }}</td>
          <td>{{ despesa.valor | currency:'BRL' }}</td>
          <td>{{ despesa.vencimento | date: 'dd/MM' }}</td>
          <td>
            <span [ngClass]="getStatusClass(despesa)">
              {{ getStatus(despesa) }}
            </span>
          </td>
          <td>
            <button (click)="iniciarEdicao(despesa)">âœï¸</button>
            <button (click)="removerDespesa(despesa)">âŒ</button>
          </td>
        </ng-template>
      </tr>
    </tbody>
  </table>
</div>